<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch S√°ch</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body class="container mt-4 bg-light">

<div class="card shadow">

    <!-- HEADER -->
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h3 class="mb-0">üìö Qu·∫£n l√Ω S√°ch</h3>
        <div>
            <a href="/nvkBook/create" class="btn btn-warning fw-bold">
                <i class="bi bi-plus-circle"></i> Th√™m m·ªõi S√°ch
            </a>

            <a href="/nvkAuthor" class="btn btn-light text-primary ms-2">
                <i class="bi bi-people"></i> Qu·∫£n l√Ω T√°c gi·∫£
            </a>
        </div>
    </div>

    <!-- BODY -->
    <div class="card-body">

        <table class="table table-bordered table-hover align-middle">
            <thead class="table-dark text-center">
            <tr>
                <th>ID</th>
                <th>·∫¢nh</th>
                <th>T√™n S√°ch</th>
                <th>M√¥ t·∫£</th>
                <th>Gi√° b√°n</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>T√°c Gi·∫£ (M-N)</th>
                <th>Tr·∫°ng th√°i</th>
                <th style="width:150px;">Ch·ª©c nƒÉng</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="book : ${nvkListBook}">

                <!-- ID -->
                <td class="text-center fw-bold"
                    th:text="${book.nvkId}"></td>

                <!-- ·∫¢NH -->
                <td class="text-center">
                    <img th:if="${book.nvkImgUrl != null}"
                         th:src="${book.nvkImgUrl}"
                         style="width: 60px; height: auto; border-radius: 5px; border: 1px solid #ccc;">
                    <span th:unless="${book.nvkImgUrl != null}"
                          class="text-muted small">No Image</span>
                </td>

                <!-- T√äN S√ÅCH -->
                <td class="fw-bold text-primary"
                    th:text="${book.nvkTitle}"></td>

                <!-- M√î T·∫¢ -->
                <td class="text-truncate"
                    style="max-width:200px;"
                    th:title="${book.nvkDescription}"
                    th:text="${book.nvkDescription}">
                </td>

                <!-- GI√Å -->
                <td class="text-end text-danger fw-bold"
                    th:text="${#numbers.formatDecimal(book.nvkPrice,0,'COMMA',0,'POINT')} + ' ƒë'">
                </td>

                <!-- S·ªê L∆Ø·ª¢NG -->
                <td class="text-center">
                    <span th:if="${book.nvkQuantity > 0}"
                          th:text="${book.nvkQuantity}"
                          class="fw-bold"></span>

                    <span th:unless="${book.nvkQuantity > 0}"
                          class="badge bg-danger">H·∫øt h√†ng</span>
                </td>

                <!-- T√ÅC GI·∫¢ -->
                <td>
                    <span th:each="auth : ${book.nvkAuthors}"
                          class="badge bg-info text-dark me-1"
                          th:text="${auth.nvkName}">
                    </span>
                </td>

                <!-- TR·∫†NG TH√ÅI -->
                <td class="text-center">
                    <span th:if="${book.nvkActive}" class="badge bg-success">
                        <i class="bi bi-check-circle"></i> KD
                    </span>

                    <span th:unless="${book.nvkActive}" class="badge bg-secondary">
                        <i class="bi bi-x-circle"></i> Ng·ª´ng
                    </span>
                </td>

                <!-- CH·ª®C NƒÇNG -->
                <td class="text-center">

                    <!-- S·ª¨A -->
                    <a th:href="@{/nvkBook/edit/{id}(id=${book.nvkId})}"
                       class="btn btn-warning btn-sm me-1"
                       title="S·ª≠a">
                        <i class="bi bi-pencil-square"></i>
                    </a>

                    <!-- X√ìA -->
                    <a th:href="@{/nvkBook/delete/{id}(id=${book.nvkId})}"
                       class="btn btn-danger btn-sm"
                       onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s√°ch n√†y kh√¥ng?');"
                       title="X√≥a">
                        <i class="bi bi-trash"></i>
                    </a>

                </td>
            </tr>

            <!-- R·ªñNG -->
            <tr th:if="${#lists.isEmpty(nvkListBook)}">
                <td colspan="9" class="text-center text-muted py-4">
                    Ch∆∞a c√≥ d·ªØ li·ªáu s√°ch n√†o.
                </td>
            </tr>

            </tbody>
        </table>

    </div>
</div>

</body>
</html>
