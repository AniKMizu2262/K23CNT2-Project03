<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Form Sản phẩm</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="bg-body">

<aside th:replace="~{fragments/sidebar :: sidebar('product')}"></aside>

<div class="content-wrapper">

    <div class="content-header mb-4 p-4 rounded shadow-sm d-flex align-items-center gap-3">
        <button class="btn btn-outline-secondary border-0" onclick="document.body.classList.toggle('sidebar-closed')"
                title="Menu">
            <i class="bi bi-list fs-4"></i>
        </button>
        <div>
            <h1 class="fw-bold fs-3 m-0"
                th:text="${nvkProduct.nvkId != null ? 'Cập nhật Sản phẩm' : 'Thêm mới Sản phẩm'}"></h1>
            <small class="text-muted">Quản lý thông tin hàng hóa và giá cả</small>
        </div>
    </div>

    <div class="content">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow-lg border-0">
                    <div class="card-header py-3 bg-transparent border-bottom">
                        <h5 class="card-title m-0 fw-bold text-primary text-uppercase">
                            <i class="bi bi-box-seam-fill me-2"></i> Thông tin sản phẩm
                        </h5>
                    </div>

                    <form th:action="@{/nvkAdmin/product/save}" th:object="${nvkProduct}" method="post"
                          enctype="multipart/form-data">
                        <div class="card-body p-4">
                            <input type="hidden" th:field="*{nvkId}">
                            <input type="hidden" th:field="*{nvkImgUrl}">

                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Mã sản phẩm <span
                                            class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-qr-code text-primary"></i></span>
                                        <input type="text" th:field="*{nvkCode}" class="form-control" required
                                               placeholder="VD: SP001">
                                    </div>
                                </div>
                                <div class="col-md-8 mt-3 mt-md-0">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Tên sản phẩm <span
                                            class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-tag text-primary"></i></span>
                                        <input type="text" th:field="*{nvkName}" class="form-control" required
                                               placeholder="Nhập tên sản phẩm...">
                                    </div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Danh mục</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-grid text-primary"></i></span>
                                        <select th:field="*{nvkCategory.nvkId}" class="form-select">
                                            <option th:each="c:${nvkCategories}" th:value="${c.nvkId}"
                                                    th:text="${c.nvkName}"></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 mt-3 mt-md-0">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Thương
                                        hiệu</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-award text-primary"></i></span>
                                        <input type="text" th:field="*{nvkBrand}" class="form-control"
                                               placeholder="VD: Apple...">
                                    </div>
                                </div>
                                <div class="col-md-4 mt-3 mt-md-0">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Tồn kho</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-boxes text-primary"></i></span>
                                        <input type="number" th:field="*{nvkQuantity}" class="form-control" value="10">
                                    </div>
                                </div>
                            </div>

                            <div class="row mb-3">

                                <div class="row mb-3">

                                    <div class="col-md-6">
                                        <label class="form-label small text-uppercase text-muted fw-bold">Giá gốc (Niêm
                                            yết)</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i
                                                    class="bi bi-currency-dollar text-muted"></i></span>

                                            <input type="number" step="0.01"
                                                   name="nvkOldPrice" id="nvkOldPrice"
                                                   th:value="${nvkProduct.nvkOldPrice != null ? #numbers.formatDecimal(nvkProduct.nvkOldPrice, 0, 'NONE', 0, 'POINT') : ''}"
                                                   class="form-control"
                                                   placeholder="Nhập giá gốc...">
                                        </div>
                                        <div class="form-text small fst-italic text-muted">Giá này sẽ hiện gạch ngang
                                            trên web.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mt-3 mt-md-0">
                                        <label class="form-label small text-uppercase text-muted fw-bold">Giá bán thực
                                            tế <span class="text-danger">*</span></label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-success text-white border-success"><i
                                                    class="bi bi-cash-stack"></i></span>

                                            <input type="number" step="0.01"
                                                   name="nvkPrice" id="nvkPrice"
                                                   th:value="${nvkProduct.nvkPrice != null ? #numbers.formatDecimal(nvkProduct.nvkPrice, 0, 'NONE', 0, 'POINT') : ''}"
                                                   class="form-control fw-bold text-success" required
                                                   placeholder="Nhập giá bán...">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label small text-uppercase text-muted fw-bold">Mô tả sản phẩm</label>
                                <textarea th:field="*{nvkDescription}" class="form-control" rows="3"
                                          placeholder="Nhập thông tin chi tiết..."></textarea>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Ảnh minh
                                        họa</label>

                                    <div class="d-flex align-items-center gap-3 border rounded bg-body px-2 py-1"
                                         style="min-height: 45px;">
                                        <img th:src="${nvkProduct.nvkImgUrl != null && nvkProduct.nvkImgUrl != '' ? nvkProduct.nvkImgUrl : 'https://ui-avatars.com/api/?name=' + (nvkProduct.nvkName != null ? nvkProduct.nvkName : 'New Product') + '&background=random&size=128'}"
                                             width="38" height="38"
                                             class="rounded border shadow-sm flex-shrink-0"
                                             style="object-fit: cover;"
                                             onerror="this.onerror=null; this.src='https://ui-avatars.com/api/?name=Product&background=random';">

                                        <div class="flex-grow-1">
                                            <input type="file" name="nvkImageFile"
                                                   class="form-control form-control-sm border-0 bg-transparent p-0">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6 mt-3 mt-md-0">
                                    <label class="form-label small text-uppercase text-muted fw-bold">Trạng thái</label>

                                    <div class="d-flex align-items-center gap-3 border rounded bg-body px-3 py-1"
                                         style="min-height: 45px;">

                                        <div class="form-check form-check-inline m-0">
                                            <input class="form-check-input" type="radio" th:field="*{nvkStatus}"
                                                   value="1" id="st1">
                                            <label class="form-check-label text-success fw-bold small"
                                                   for="st1">Bán</label>
                                        </div>

                                        <div class="form-check form-check-inline m-0">
                                            <input class="form-check-input" type="radio" th:field="*{nvkStatus}"
                                                   value="2" id="st2">
                                            <label class="form-check-label text-warning fw-bold small" for="st2">Sắp
                                                về</label>
                                        </div>

                                        <div class="form-check form-check-inline m-0">
                                            <input class="form-check-input" type="radio" th:field="*{nvkStatus}"
                                                   value="0" id="st0">
                                            <label class="form-check-label text-danger fw-bold small"
                                                   for="st0">Ngừng</label>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-top p-3 text-end">
                            <a href="/nvkAdmin/product" class="btn btn-secondary me-2">Quay lại</a>
                            <button type="submit" class="btn btn-primary px-4 fw-bold">Lưu dữ liệu</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>function toggleSidebar() {
    document.body.classList.toggle('sidebar-closed');
}</script>
</body>
</html>